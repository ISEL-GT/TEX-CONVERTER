\subsection{alu.vhd}
\begin{lstlisting}
library ieee;
use ieee.std_logic_1164.all;

-- This is the main entity of the project, responsible for starting every 
-- operation, allowing 
entity alu is

	port (
		X    : in std_logic_vector(3 downto 0);
		Y	  : in std_logic_vector(3 downto 0);
		OP   : in std_logic_vector(2 downto 0);
		CBi  : in std_logic;
		
		R 	  : out std_logic_vector(3 downto 0);
		CBo  : out std_logic;
		Ov   : out std_logic;
		Z 	  : out std_logic;
		P 	  : out std_logic;
		GE	  : out std_logic;
		BE	  : out std_logic
	);
	
end alu;


architecture behavioral of alu is

	-- Import the arithmetic unit 
	component arithmeticunit
	
		port (
			A    : in std_logic_vector(3 downto 0);
			B 	  : in std_logic_vector(3 downto 0);
		
			Ci : in std_logic;
			Co : out std_logic;
			
			OPbit : in std_logic;
			R  	: out std_logic_vector(3 downto 0);
			Ov    : out std_logic
		);
		
	end component;
	
	-- Import the logic module
	component logic_module
		
		port (
			A : in std_logic_vector(3 downto 0);
			B : in std_logic_vector(3 downto 0);
			
			S0 : in std_logic;
			S1 : in std_logic;
			
			Co : out std_logic;
			R 	: out std_logic_vector(3 downto 0)
		);
	
	end component;
	
	-- Import the decoder
	component decoder
	
		port (
			OP2 : in std_logic;
			OP1 : in std_logic;
			OP0 : in std_logic;
			
			OPa : out std_logic;
			OPb : out std_logic;
			OPc : out std_logic;
			OPd : out std_logic;
			OPe : out std_logic;
			OPf : out std_logic
		);
		
	end component;
	
	-- Import the two inputs MUX
	component mux_2inputs
	
		port (
			A : in std_logic_vector(3 downto 0);
			B : in std_logic_vector(3 downto 0); 

			S : in std_logic;

			R : out std_logic_vector (3 downto 0)
		);
		
	end component;
	
	-- Import the two inputs MUX
	component flags_main
	
		port (
			Ov 	 : in std_logic;
			CBi_au : in std_logic;
			CBi_lm : in std_logic;
			R_mux  : in std_logic_vector(3 downto 0);
			OPf 	 : in std_logic;
			
			CBo 	 : out std_logic;
			Ov_out : out std_logic;
			BE		 : out std_logic;
			GE 	 : out std_logic;
			P		 : out std_logic;
			Zs		 : out std_logic
		);
		
	end component;
	
	-- Defines all the operation signals to be used
	signal OPa : std_logic;
	signal OPb : std_logic;
	signal OPc : std_logic;
	signal OPd : std_logic;
	signal OPe : std_logic;
	signal OPf : std_logic;
	
	-- Defines all the output signals
	signal out_mux_yor 		   : std_logic_vector(3 downto 0);
	signal Co_arithmetic_unit  : std_logic;
	signal out_arithmetic_unit : std_logic_vector(3 downto 0);
	signal Ov_arithmetic_unit  : std_logic;
	signal Co_logic_module     : std_logic;
	signal out_logic_module		: std_logic_vector(3 downto 0);
	signal out_mux_main			: std_logic_vector(3 downto 0);
	
begin

	-- Instantiate the main decoder, to translate the operation bits to the A-F signals
	instance_decoder : decoder	
		
		port map (
			OP2 => OP(2),
			OP1 => OP(1),
			OP0 => OP(0),
			
			OPa => OPa,
			OPb => OPb,
			OPc => OPc,
			OPd => OPd,
			OPe => OPe,
			OPf => OPf
		);
			
			
	-- Instantiates the 2 inputs MUX that will serve as a YOR
	instance_yor : mux_2inputs 
	
		port map (
			A => "0000",
			B => Y,
			S => OPa,
			
			R => out_mux_yor
		);
		

	-- Instantiates the arithmetic unit to perform math operations
	instance_arithmetic_unit : arithmeticunit
	
		port map (
			A => X,
			B => out_mux_yor,
		
			Ci => CBi,
			Co => Co_arithmetic_unit,
			
			OPbit => OPb,
			R     => out_arithmetic_unit,
			Ov    => Ov_arithmetic_unit
		);
			
			
	-- Instantiates the logic module for any relational or logical operations
	instance_logic_module : logic_module
	
		port map (
			A => X,
			B => Y,
			
			S0 => OPd,
			S1 => OPe,
			
			Co => Co_logic_module,
			R  => out_logic_module
		);
		
	
	-- Instantiates the MUX used to connect the logic module and arithmetic unit
	instance_mux : mux_2inputs 
	
		port map (
			A => out_arithmetic_unit,
			B => out_logic_module,
			S => OPc,
			
			R => out_mux_main
		);
		
	
	-- Instantiates the flags module
	instance_flags : flags_main
		
		port map (
			Ov     => Ov_arithmetic_unit,
			CBi_au => Co_arithmetic_unit,
			CBi_lm => Co_logic_module,
			R_mux  => out_mux_main,
			OPf 	 => OPf,
			
			CBo 	 => CBo,
			Ov_out => Ov,
			BE		 => BE,
			GE 	 => GE,
			P		 => P,
			Zs		 => Z
		);
		
	R <= out_mux_main;
			
end behavioral;
	




	
\end{lstlisting}
\clearpage